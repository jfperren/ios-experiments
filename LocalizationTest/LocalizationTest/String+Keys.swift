// 
//  Localizable.strings
//  LocalizableTest
//
//  Auto-generated by Julien Perrenoud on 3/1/2017 at 21:43
//  Copyright (c) 2017 BuddyHopp. All rights reserved. 
//

import Foundation

enum Strings: LocalizationKey {
    
    case singleLevel

    enum chat: LocalizationKey {
    
        case categoryTitle(category: String)
        case wrongInput(input: String, solution: String)

        enum topLevel: LocalizationKey {
        
            case test
        }
    }

    enum common: LocalizationKey {
    
        case cancel
        case ok

        enum special: LocalizationKey {
        
            case another(profile: String)
        }
    }

    enum other: LocalizationKey {
    
        case giuseppe(beautiful: String)
    }

    enum registration: LocalizationKey {
    
        case incorrectPassword
    }
}

// MARK: - String extension

extension String {
    
    init(key: LocalizationKey, comment: String = "") {
        
        // Replace parameters with correct value.
        
        var string = NSLocalizedString(key.rawValue, comment: comment)
        
        for (parameter, value) in key.parameters {
            string = string.replacingOccurrences(of: "{{\(parameter)}}", with: value)
        }
        
        self = string
    }
}

// MARK: - LocalizationKey

protocol LocalizationKey {
    
    /**
     String value of this key in `Localizable.strings`
    */
    var rawValue: String { get }
    
    /**
     Dictionary with all parameters associated with this key
    */
    var parameters: [String: String] { get }
    
}

extension LocalizationKey {
    
    var rawValue: String {
        return getRawValue(key: self)
    }
    
    var parameters: [String: String] {
        return getParameters(key: self)
    }
}

// MARK: - Helpers

fileprivate func getRawValue(key: LocalizationKey) -> String {
    switch key {
    
    case Strings.chat.categoryTitle: return "chat.categoryTitle"
    case Strings.chat.topLevel.test: return "chat.topLevel.test"
    case Strings.chat.wrongInput: return "chat.wrongInput"
    case Strings.common.cancel: return "common.cancel"
    case Strings.common.ok: return "common.ok"
    case Strings.common.special.another: return "common.special.another"
    case Strings.other.giuseppe: return "other.giuseppe"
    case Strings.registration.incorrectPassword: return "registration.incorrectPassword"
    case Strings.singleLevel: return "singleLevel"
    default: return ""
    }
}

fileprivate func getParameters(key: LocalizationKey) -> [String: String] {
    switch key {
    
    case Strings.chat.categoryTitle(let category): return ["category": category]
    case Strings.chat.topLevel.test: return [:]
    case Strings.chat.wrongInput(let input, let solution): return ["input": input, "solution": solution]
    case Strings.common.cancel: return [:]
    case Strings.common.ok: return [:]
    case Strings.common.special.another(let profile): return ["profile": profile]
    case Strings.other.giuseppe(let beautiful): return ["beautiful": beautiful]
    case Strings.registration.incorrectPassword: return [:]
    case Strings.singleLevel: return [:]
    default: return [:]
    }
}
